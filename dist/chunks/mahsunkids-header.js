async function C(f,k){console.log("[bt-mahsunkids] üöÄ Script de header carregado!");function b(e=50,n=100){return new Promise(r=>{let i=0;const a=()=>{i++;const u=document.querySelector("#header-react-app");if(u){console.log("[bt-mahsunkids] ‚úÖ Header encontrado ap√≥s",i,"tentativas"),r(u);return}if(i>=e){console.error("[bt-mahsunkids] ‚ùå Header n√£o encontrado ap√≥s",e,"tentativas"),r(null);return}setTimeout(a,n)};a()})}async function l(){const e=await b();e&&c(e)}const m=document.querySelector("#header-react-app");m?(console.log("[bt-mahsunkids] ‚úÖ Header j√° dispon√≠vel, iniciando..."),c(m)):(console.log("[bt-mahsunkids] ‚è≥ Aguardando header aparecer..."),document.readyState==="loading"?document.addEventListener("DOMContentLoaded",l):l());function c(e){if(console.log("[bt-mahsunkids] ‚úÖ Iniciando configura√ß√£o do header..."),!e){console.error("[bt-mahsunkids] ‚ùå Header n√£o fornecido!");return}console.log("[bt-mahsunkids] ‚úÖ Header recebido:",e);const n={allowedPages:["/mah-sun-kids","/teste","/home-nova"],scrollThreshold:50};function r(){document.querySelectorAll(".container-menu a, .container-menu span.menu-text").forEach(function(o){o.classList.remove("text-cor-texto"),o.classList.remove("dark:text-secondary-50"),o.classList.remove("dark:text-secondary-300"),o.classList.remove("dark:hover:text-secondary-300"),o.style.color="#333333"}),document.querySelectorAll(".container-menu").forEach(function(o){o.style.backgroundColor="#ffffff"})}function i(){const t=window.location.pathname,s=n.allowedPages.some(o=>t===o||t===o+"/"||t.startsWith(o+"/")||t.includes(o));return console.log("[bt-mahsunkids] üîç P√°gina:",t,"| Permitida?",s),s}function a(){return i()}function u(){e.style.setProperty("position","fixed","important"),e.style.setProperty("top","0","important"),e.style.setProperty("left","0","important"),e.style.setProperty("right","0","important"),e.style.setProperty("width","100%","important"),e.style.setProperty("z-index","999","important")}function p(){e.style.removeProperty("background"),e.style.removeProperty("background-color"),e.style.setProperty("background-color","#ffffff","important"),e.style.setProperty("background","#ffffff","important");const t=e.querySelector(".header-top");t&&(t.style.removeProperty("background"),t.style.removeProperty("background-color"),t.style.setProperty("background-color","#ffffff","important"),t.style.setProperty("background","#ffffff","important")),e.classList.contains("header-scrolled")||e.classList.add("header-scrolled"),e.offsetHeight,console.log("[bt-mahsunkids] ‚úÖ Fundo branco FOR√áADO | Classes:",e.className)}function T(){e.style.removeProperty("background"),e.style.setProperty("background-color","transparent","important"),e.style.setProperty("background","transparent","important");const t=e.querySelector(".header-top");t&&(t.style.removeProperty("background"),t.style.setProperty("background-color","transparent","important"),t.style.setProperty("background","transparent","important")),e.classList.contains("header-scrolled")&&e.classList.remove("header-scrolled"),e.offsetHeight,console.log("[bt-mahsunkids] ‚úÖ Transpar√™ncia FOR√áADA | Classes:",e.className)}function y(){u();const t=window.pageYOffset||document.documentElement.scrollTop,s=a();if(console.log("[bt-mahsunkids] üìä Scroll:",t,"| Deve ser transparente?",s),!s){p(),console.log("[bt-mahsunkids] ‚úÖ Header BRANCO (p√°gina n√£o permitida)");return}t>n.scrollThreshold?(p(),console.log("[bt-mahsunkids] ‚úÖ Header BRANCO (scrolled)")):(T(),console.log("[bt-mahsunkids] ‚úÖ Header TRANSPARENTE"))}u(),y();let g=null,v=!1;function h(){y(),v=!0,g&&clearTimeout(g),g=setTimeout(function(){v=!1,y()},150)}window.addEventListener("scroll",h,{passive:!0}),window.addEventListener("wheel",h,{passive:!0}),window.addEventListener("touchmove",h,{passive:!0}),document.addEventListener("scroll",h,{passive:!0});let d=null;setInterval(function(){const t=window.pageYOffset||document.documentElement.scrollTop,s=a(),o={scroll:t>n.scrollThreshold,shouldBeTransparent:s,scrollValue:t};if(!d||d.scroll!==o.scroll||d.shouldBeTransparent!==o.shouldBeTransparent||Math.abs(d.scrollValue-o.scrollValue)>10||v){const w=window.getComputedStyle(e).backgroundColor,S=w.includes("255")||w.includes("rgb(255");t>n.scrollThreshold||!s?(!e.classList.contains("header-scrolled")||!S)&&(console.log("[bt-mahsunkids] üîß Corrigindo: fundo deveria ser branco! Scroll:",t),p()):(e.classList.contains("header-scrolled")||S)&&(console.log("[bt-mahsunkids] üîß Corrigindo: fundo deveria ser transparente! Scroll:",t),T()),d=o}},50),new MutationObserver(function(t){t.forEach(function(s){s.type==="attributes"&&s.attributeName==="style"&&setTimeout(function(){const o=window.pageYOffset||document.documentElement.scrollTop,P=a();(o>n.scrollThreshold||!P)&&(e.classList.contains("header-scrolled")||p())},10),s.type==="attributes"&&s.attributeName==="class"&&setTimeout(y,10)})}).observe(e,{attributes:!0,attributeFilter:["style","class"],subtree:!1}),a()&&(document.body.classList.add("has-transparent-header"),console.log('[bt-mahsunkids] ‚úÖ Classe "has-transparent-header" adicionada')),document.querySelectorAll("#nav-root > li").forEach(function(t){t.addEventListener("mouseenter",function(){setTimeout(r,10)})}),setInterval(r,1e3),setTimeout(r,500)}}async function A(){console.log("[bt-mahsunkids] üé® Iniciando overlay de banners...");const f={allowedPages:["/","/index.html","/mah-sun-kids","/teste","/home-nova"],opacity:.3,color:"0, 0, 0"};function k(){const e=window.location.pathname;return f.allowedPages.some(n=>e===n||e===n+"/"||e.startsWith(n+"/")||e.includes(n))}function b(){return k()}if(!b()){console.log("[bt-mahsunkids] ‚ùå Overlay n√£o ser√° aplicado nesta p√°gina");return}function l(){document.querySelectorAll(".bt-section-banner .swiper-slide").forEach(function(n){if(!n.querySelector(".banner-overlay")){const r=document.createElement("div");r.className="banner-overlay",r.style.backgroundColor=`rgba(${f.color}, ${f.opacity})`,n.appendChild(r),console.log("[bt-mahsunkids] ‚úÖ Overlay aplicado")}})}setTimeout(l,500);const m=new MutationObserver(l),c=document.querySelector(".bt-section-banner");c&&m.observe(c,{childList:!0,subtree:!0})}export{A as initBannerOverlay,C as mount};
