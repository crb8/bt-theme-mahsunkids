async function E(m,P){console.log("[bt-mahsunkids] üöÄ Script de header carregado!");function v(e=50,s=100){return new Promise(r=>{let a=0;const l=()=>{a++;const d=document.querySelector("#header-react-app");if(d){console.log("[bt-mahsunkids] ‚úÖ Header encontrado ap√≥s",a,"tentativas"),r(d);return}if(a>=e){console.error("[bt-mahsunkids] ‚ùå Header n√£o encontrado ap√≥s",e,"tentativas"),r(null);return}setTimeout(l,s)};l()})}async function c(){const e=await v();e&&i(e)}const f=document.querySelector("#header-react-app");f?(console.log("[bt-mahsunkids] ‚úÖ Header j√° dispon√≠vel, iniciando..."),i(f)):(console.log("[bt-mahsunkids] ‚è≥ Aguardando header aparecer..."),document.readyState==="loading"?document.addEventListener("DOMContentLoaded",c):c());function i(e){if(console.log("[bt-mahsunkids] ‚úÖ Iniciando configura√ß√£o do header..."),!e){console.error("[bt-mahsunkids] ‚ùå Header n√£o fornecido!");return}console.log("[bt-mahsunkids] ‚úÖ Header recebido:",e);const s={allowedPages:["/mah-sun-kids"],scrollThreshold:50};function r(){document.querySelectorAll(".container-menu a, .container-menu span.menu-text").forEach(function(o){o.classList.remove("text-cor-texto"),o.classList.remove("dark:text-secondary-50"),o.classList.remove("dark:text-secondary-300"),o.classList.remove("dark:hover:text-secondary-300"),o.style.color="#333333"}),document.querySelectorAll(".container-menu").forEach(function(o){o.style.backgroundColor="#ffffff"})}function a(){const t=window.location.pathname,n=t.replace(/\/$/,""),o=s.allowedPages.some(g=>{const p=g.replace(/\/$/,"");return n===p||n.startsWith(p+"?")});return console.log("[bt-mahsunkids] üîç P√°gina:",t,"| Normalizada:",n,"| Permitida?",o),o}function l(){return a()}function d(){e.style.setProperty("position","fixed","important"),e.style.setProperty("top","0","important"),e.style.setProperty("left","0","important"),e.style.setProperty("right","0","important"),e.style.setProperty("width","100%","important"),e.style.setProperty("z-index","999","important")}function y(){e.style.removeProperty("background"),e.style.removeProperty("background-color"),e.style.setProperty("background-color","#ffffff","important"),e.style.setProperty("background","#ffffff","important");const t=e.querySelector(".header-top");t&&(t.style.removeProperty("background"),t.style.removeProperty("background-color"),t.style.setProperty("background-color","#ffffff","important"),t.style.setProperty("background","#ffffff","important")),e.classList.contains("header-scrolled")||e.classList.add("header-scrolled"),e.offsetHeight,console.log("[bt-mahsunkids] ‚úÖ Fundo branco FOR√áADO | Classes:",e.className)}function T(){e.style.removeProperty("background"),e.style.setProperty("background-color","transparent","important"),e.style.setProperty("background","transparent","important");const t=e.querySelector(".header-top");t&&(t.style.removeProperty("background"),t.style.setProperty("background-color","transparent","important"),t.style.setProperty("background","transparent","important")),e.classList.contains("header-scrolled")&&e.classList.remove("header-scrolled"),e.offsetHeight,console.log("[bt-mahsunkids] ‚úÖ Transpar√™ncia FOR√áADA | Classes:",e.className)}function h(){d();const t=window.pageYOffset||document.documentElement.scrollTop,n=l();if(console.log("[bt-mahsunkids] üìä Scroll:",t,"| Deve ser transparente?",n),!n){y(),console.log("[bt-mahsunkids] ‚úÖ Header BRANCO (p√°gina n√£o permitida)");return}t>s.scrollThreshold?(y(),console.log("[bt-mahsunkids] ‚úÖ Header BRANCO (scrolled)")):(T(),console.log("[bt-mahsunkids] ‚úÖ Header TRANSPARENTE"))}d(),h();let k=null,w=!1;function b(){h(),w=!0,k&&clearTimeout(k),k=setTimeout(function(){w=!1,h()},150)}window.addEventListener("scroll",b,{passive:!0}),window.addEventListener("wheel",b,{passive:!0}),window.addEventListener("touchmove",b,{passive:!0}),document.addEventListener("scroll",b,{passive:!0});let u=null;setInterval(function(){const t=window.pageYOffset||document.documentElement.scrollTop,n=l(),o={scroll:t>s.scrollThreshold,shouldBeTransparent:n,scrollValue:t};if(!u||u.scroll!==o.scroll||u.shouldBeTransparent!==o.shouldBeTransparent||Math.abs(u.scrollValue-o.scrollValue)>10||w){const p=window.getComputedStyle(e).backgroundColor,S=p.includes("255")||p.includes("rgb(255");t>s.scrollThreshold||!n?(!e.classList.contains("header-scrolled")||!S)&&(console.log("[bt-mahsunkids] üîß Corrigindo: fundo deveria ser branco! Scroll:",t),y()):(e.classList.contains("header-scrolled")||S)&&(console.log("[bt-mahsunkids] üîß Corrigindo: fundo deveria ser transparente! Scroll:",t),T()),u=o}},50),new MutationObserver(function(t){t.forEach(function(n){n.type==="attributes"&&n.attributeName==="style"&&setTimeout(function(){const o=window.pageYOffset||document.documentElement.scrollTop,g=l();(o>s.scrollThreshold||!g)&&(e.classList.contains("header-scrolled")||y())},10),n.type==="attributes"&&n.attributeName==="class"&&setTimeout(h,10)})}).observe(e,{attributes:!0,attributeFilter:["style","class"],subtree:!1}),l()&&(document.body.classList.add("has-transparent-header"),console.log('[bt-mahsunkids] ‚úÖ Classe "has-transparent-header" adicionada')),document.querySelectorAll("#nav-root > li").forEach(function(t){t.addEventListener("mouseenter",function(){setTimeout(r,10)})}),setInterval(r,1e3),setTimeout(r,500)}}async function C(){console.log("[bt-mahsunkids] üé® Iniciando overlay de banners...");const m={allowedPages:["/mah-sun-kids"],opacity:.3,color:"0, 0, 0"};function P(){const s=window.location.pathname.replace(/\/$/,"");return m.allowedPages.some(r=>{const a=r.replace(/\/$/,"");return s===a||s.startsWith(a+"?")})}function v(){return P()}if(!v()){console.log("[bt-mahsunkids] ‚ùå Overlay n√£o ser√° aplicado nesta p√°gina");return}function c(){document.querySelectorAll(".bt-section-banner .swiper-slide").forEach(function(s){if(!s.querySelector(".banner-overlay")){const r=document.createElement("div");r.className="banner-overlay",r.style.backgroundColor=`rgba(${m.color}, ${m.opacity})`,s.appendChild(r),console.log("[bt-mahsunkids] ‚úÖ Overlay aplicado")}})}setTimeout(c,500);const f=new MutationObserver(c),i=document.querySelector(".bt-section-banner");i&&f.observe(i,{childList:!0,subtree:!0})}export{C as initBannerOverlay,E as mount};
